<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started | Fun I/O</title>
    <meta name="description" content="Functional I/O for Java and Scala">
    
    
    <link rel="preload" href="/fun-io/assets/css/0.styles.6963bb8e.css" as="style"><link rel="preload" href="/fun-io/assets/js/app.01b3ccc7.js" as="script"><link rel="preload" href="/fun-io/assets/js/7.ae43ea04.js" as="script"><link rel="prefetch" href="/fun-io/assets/js/2.d202cb91.js"><link rel="prefetch" href="/fun-io/assets/js/3.b1f57a15.js"><link rel="prefetch" href="/fun-io/assets/js/4.0932cfcd.js"><link rel="prefetch" href="/fun-io/assets/js/5.bcab9d75.js"><link rel="prefetch" href="/fun-io/assets/js/6.74cc7dbe.js"><link rel="prefetch" href="/fun-io/assets/js/8.10bc08c1.js"><link rel="prefetch" href="/fun-io/assets/js/9.0666aee1.js">
    <link rel="stylesheet" href="/fun-io/assets/css/0.styles.6963bb8e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fun-io/" class="home-link router-link-active"><!----> <span class="site-name">Fun I/O</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/fun-io/" class="sidebar-link">Home</a></li><li><a href="/fun-io/module-structure-and-features.html" class="sidebar-link">Module Structure And Features</a></li><li><a href="/fun-io/getting-started.html" class="active sidebar-link">Getting Started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#design-concept" class="sidebar-link">Design Concept</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#configuring-the-classpath" class="sidebar-link">Configuring The Classpath</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#encoding-objects" class="sidebar-link">Encoding Objects</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#applying-filters" class="sidebar-link">Applying Filters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#encoding-objects-to-files" class="sidebar-link">Encoding Objects To Files</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#decoding-objects-from-files" class="sidebar-link">Decoding Objects From Files</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#using-connected-codecs" class="sidebar-link">Using Connected Codecs</a></li></ul></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#cloning-objects" class="sidebar-link">Cloning Objects</a></li><li class="sidebar-sub-header"><a href="/fun-io/getting-started.html#copying-data" class="sidebar-link">Copying Data</a></li></ul></li><li><a href="/fun-io/basic-archive-processing.html" class="sidebar-link">Basic Archive Processing</a></li><li><a href="/fun-io/advanced-archive-processing.html" class="sidebar-link">Advanced Archive Processing</a></li></ul> </div> <div class="page"><!---->  <div class="content"><h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h1> <h2 id="design-concept"><a href="#design-concept" class="header-anchor">#</a> Design Concept</h2> <p>Fun I/O employs a few simple design principles:</p> <div><ul><li>The API is defined by abstract classes and interfaces in the module <code>fun-io-api</code>.</li> <li>The module <code>fun-io-scala-api</code> adds operators and implicit conversions for an enhanced development experience in Scala.</li> <li>Each implementation module provides a single facade class which consists of one or more static factory methods.</li> <li>Each static factory method returns an instance of a class or interface defined by the API without revealing the actual
implementation class.</li> <li>Except for their expected side effect (e.g. reading or writing data), implementations are virtually stateless, and
hence reusable and trivially thread-safe.</li></ul></div> <div><p>With this design, the canonical way of using Fun I/O is to import some static factory methods from one or more facade
classes.
It's perfectly fine to import all static factory methods using a wildcard like <code>*</code>.
However, for the purpose of showing the originating facade class, the examples on this page do not use wildcard imports
for static factory methods.</p></div> <h2 id="configuring-the-classpath"><a href="#configuring-the-classpath" class="header-anchor">#</a> Configuring The Classpath</h2> <div><p>Once you've decided on the set of features required by your application you need to add the respective modules to the
class path - see <a href="/fun-io/module-structure-and-features.html">Module Structure And Features</a>.
A Java application typically has a dependency on <code>fun-io-bios</code>.
A Scala application typically has the same dependencies as a Java application plus an additional dependency on
<code>fun-io-scala-api</code> to improve the development experience in Scala.</p></div> <div><p>The examples on this page depend on <code>fun-io-bios</code>, <code>fun-io-jackson</code>, <code>fun-io-scala-api</code> and, transitively, <code>fun-io-api</code>.
If your application is a Java project build with Maven or a Scala project build with SBT, then you need to add the
following to its project configuration:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Maven</a></li><li><a>SBT</a></li></ul> <div><div class="language-pom extra-class"><pre class="language-text"><code>&lt;!-- pom.xml --&gt;
&lt;project [...]&gt;
    [...]
    &lt;dependencies&gt;
        [...]
        &lt;dependency&gt;
            &lt;groupId&gt;global.namespace.fun-io&lt;/groupId&gt;
            &lt;artifactId&gt;fun-io-bios&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;global.namespace.fun-io&lt;/groupId&gt;
            &lt;artifactId&gt;fun-io-jackson&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></div></div><div><!----></div></div> <h2 id="encoding-objects"><a href="#encoding-objects" class="header-anchor">#</a> Encoding Objects</h2> <div><p>The following code encodes the string <code>&quot;Hello world!&quot;</code> to JSON and writes it to standard output - including the quotes:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Codec</span><span class="token punctuation">;</span>       <span class="token comment">// from module `fun-io-api`</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Encoder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Sink</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">;</span>       <span class="token comment">// from module `fun-io-bios`</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">;</span> <span class="token comment">// from module `fun-io-jackson`</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Codec</span> codec <span class="token operator">=</span> <span class="token class-name">Jackson</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Sink</span> sink <span class="token operator">=</span> BIOS<span class="token punctuation">.</span><span class="token function">stdout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Encoder</span> encoder <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span>sink<span class="token punctuation">)</span><span class="token punctuation">;</span>
        encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In the preceding code, first an instance of the <code>Codec</code> interface is obtained from the <code>Jackson</code> facade class for
encoding/decoding objects to/from JSON.
Next, an instance of the interface <code>Sink</code> is obtained from the <code>BIOS</code> facade class for writing to standard output.
The codec and the sink are then combined into an instance of the <code>Encoder</code> interface.
Finally, the encoder is used to encode the string <code>&quot;Hello world!&quot;</code> and write it to standard output.</p></div> <p>The preceding code can be simplified to the following one-liner:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>stdout<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span><span class="token function">stdout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>Note that importing static members of facade classes like <code>BIOS</code> and <code>Jackson</code> is the canonical way to use their API.
As you can see, this leads to concise, easily comprehensible code.</p></div> <div><p>There are many other <code>Codecs</code> and <code>Sinks</code> available - see <a href="/fun-io/module-structure-and-features.html">Module Structure And Features</a>.
Also, the <code>Sink</code> interface is extended by the <code>Store</code> interface, of which you will find plenty implementations provided
by facade classes like <code>BIOS</code> and others, as you will see in the next example.</p></div> <h2 id="applying-filters"><a href="#applying-filters" class="header-anchor">#</a> Applying Filters</h2> <h3 id="encoding-objects-to-files"><a href="#encoding-objects-to-files" class="header-anchor">#</a> Encoding Objects To Files</h3> <div><p>The following example is only slightly more complex than the previous one.
Again, the string <code>&quot;Hello world!&quot;</code> is encoded to JSON, but this time it also gets compressed using GZIP and the result
saved to the file <code>hello-world.gz</code>:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Codec</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Filter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">Store</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Filter</span> gzip <span class="token operator">=</span> BIOS<span class="token punctuation">.</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Filter</span> buffer <span class="token operator">=</span> BIOS<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Codec</span> codec <span class="token operator">=</span> <span class="token class-name">Jackson</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>gzip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Store</span> store <span class="token operator">=</span> BIOS<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        codec<span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In the preceding code, first two instances of the <code>Filter</code> interface are obtained from the <code>BIOS</code> facade class which
represent the GZIP compression and an heap buffer algorithm, respectively.
Next, an instance of the <code>Codec</code> interface is obtained from the <code>Jackson</code> facade class for encoding/decoding objects
to/from JSON, just like in the previous example.
This time however, the <code>map</code> method is called to transform the codec into a new codec which applies the two filters.
In Scala, this expression can be more concisely written as <code>json &lt;&lt; gzip &lt;&lt; buffer</code>, where the <code>&lt;&lt;</code> operator is
associative.
Also, note that the buffer filter is applied last in order to minimize the number of subsequent write operations to the
file.
Next, an instance of the <code>Store</code> interface is obtained from the <code>BIOS</code> facade class which represents the file
<code>hello-world.gz</code>.
Finally, the codec is connected to the store and used to encode, compress and write the string <code>&quot;Hello world!&quot;</code> to the
file <code>hello-world.gz</code>.</p></div> <p>Again, using static imports from the facade classes, the preceding code can be simplified to the following:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <h3 id="decoding-objects-from-files"><a href="#decoding-objects-from-files" class="header-anchor">#</a> Decoding Objects From Files</h3> <p>To read the object back from the file, you can use the following code:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> clone <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">decoder</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>As you can see, it's analogous to the writing algorithm:
You just need to replace the calls to the methods <code>encoder</code> and <code>encode</code> with <code>decoder</code> and <code>decode</code>, respectively.
The composition of the JSON codec with the GZIP and buffer filters remains the same.</p></div> <h3 id="using-connected-codecs"><a href="#using-connected-codecs" class="header-anchor">#</a> Using Connected Codecs</h3> <div><p>Sometimes, an application needs to read and write some structured data to the same store again and again.<br>
In this case, rather than repeatedly creating an instance of the <code>Encoder</code> interface for writing and its <code>Decoder</code>
counterpart for reading, it's simpler to make a permanent connection of a <code>Codec</code> to a <code>Store</code> by using a
<code>ConnectedCodec</code>:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">ConnectedCodec</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ConnectedCodec</span> codec <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        codec<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> clone <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In the preceding code, the <code>connect</code> method connects the (transformed) <code>Codec</code> to a (file) <code>Store</code> into a
<code>ConnectedCodec</code>.
Subsequently, the connected codec is used to write and read back the string <code>&quot;Hello world!&quot;</code>.</p></div> <h2 id="cloning-objects"><a href="#cloning-objects" class="header-anchor">#</a> Cloning Objects</h2> <div><p>A <code>ConnectedCodec</code> is an <code>Encoder</code> and a <code>Decoder</code> in one, so it can be used to create a deep clone of the original
object, as seen in the previous example.
To make this more useful, the <code>gzip()</code> and <code>buffer()</code> filters and the <code>file(...)</code> store can be removed and the encoded
data get buffered on the heap instead:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">ConnectedCodec</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ConnectedCodec</span> codec <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        codec<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> clone <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>Note that the <code>memory</code> method returns just another instance of the <code>Store</code> interface which is backed by an array of
bytes.
Encoding and decoding can be done in a single step:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api</span><span class="token punctuation">.</span><span class="token class-name">ConnectedCodec</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson</span><span class="token punctuation">.</span><span class="token class-name">Jackson</span><span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> clone <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <p>Because deep-cloning is a standard use case, there is a ready-made method in the BIOS facade for it:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>clone<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> c <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> c<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In contrast to the previous examples, this method uses <code>BIOS.serialization()</code> instead of <code>Jackson.json()</code> as the
<code>Codec</code>, so the object to clone must implement <code>java.io.Serializable</code>.</p></div> <h2 id="copying-data"><a href="#copying-data" class="header-anchor">#</a> Copying Data</h2> <div><p>The BIOS facade class provides some utility methods for standard use cases based on the abstractions provided by the
API.
One of these standard use cases is implemented by <code>BIOS.copy</code> in all its overloaded variants:
Copying all data from a given source of some form to a given sink of some form.
Other than the naive <em>while-read-do-write</em> loop, these copy methods employ a background thread and a ring buffer for
reading the data and piping it to the current thread for writing the data.
The result is a significant performance boost due to much better utilization of I/O channels:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>copy<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios</span><span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>gzip<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">copy</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;file.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>The preceding code decompresses the data from the file <code>file.gz</code> and writes the decompressed data to the file <code>file</code>.</p></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fun-io/module-structure-and-features.html" class="prev">
          Module Structure And Features
        </a></span> <span class="next"><a href="/fun-io/basic-archive-processing.html">
          Basic Archive Processing
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/fun-io/assets/js/app.01b3ccc7.js" defer></script><script src="/fun-io/assets/js/7.ae43ea04.js" defer></script>
  </body>
</html>
