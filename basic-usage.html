<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Basic Usage | Fun I/O</title>
    <meta name="description" content="Functional I/O for Java and Scala">
    
    
    <link rel="preload" href="/fun-io/assets/css/0.styles.c120b54a.css" as="style"><link rel="preload" href="/fun-io/assets/js/app.04e0a5dd.js" as="script"><link rel="preload" href="/fun-io/assets/js/6.3f3e93d8.js" as="script"><link rel="prefetch" href="/fun-io/assets/js/2.7ff138ca.js"><link rel="prefetch" href="/fun-io/assets/js/3.af666e7c.js"><link rel="prefetch" href="/fun-io/assets/js/4.1ba9a7e5.js"><link rel="prefetch" href="/fun-io/assets/js/5.b9b1c55b.js"><link rel="prefetch" href="/fun-io/assets/js/7.000265fb.js"><link rel="prefetch" href="/fun-io/assets/js/8.c95d499e.js"><link rel="prefetch" href="/fun-io/assets/js/9.ad60f2f5.js">
    <link rel="stylesheet" href="/fun-io/assets/css/0.styles.c120b54a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fun-io/" class="home-link router-link-active"><!----> <span class="site-name">Fun I/O</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/fun-io/" class="sidebar-link">Home</a></li><li><a href="/fun-io/module-structure-and-features.html" class="sidebar-link">Module Structure And Features</a></li><li><a href="/fun-io/basic-usage.html" class="active sidebar-link">Basic Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#design-concept" class="sidebar-link">Design Concept</a></li><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#configuring-the-classpath" class="sidebar-link">Configuring The Classpath</a></li><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#encoding-objects" class="sidebar-link">Encoding Objects</a></li><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#applying-filters" class="sidebar-link">Applying Filters</a></li><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#cloning-objects" class="sidebar-link">Cloning Objects</a></li><li class="sidebar-sub-header"><a href="/fun-io/basic-usage.html#copying-data" class="sidebar-link">Copying Data</a></li></ul></li><li><a href="/fun-io/basic-archive-processing.html" class="sidebar-link">Basic Archive Processing</a></li><li><a href="/fun-io/advanced-archive-processing.html" class="sidebar-link">Advanced Archive Processing</a></li></ul> </div> <div class="page"><!---->  <div class="content"><h1 id="basic-usage"><a href="#basic-usage" aria-hidden="true" class="header-anchor">#</a> Basic Usage</h1> <h2 id="design-concept"><a href="#design-concept" aria-hidden="true" class="header-anchor">#</a> Design Concept</h2> <p>Fun I/O employs a few simple design principles:</p> <div><ul><li>The API is defined by abstract classes and interfaces in the module <code>fun-io-api</code>.</li> <li>The module <code>fun-io-scala-api</code> adds operators and implicit conversions for an enhanced development experience in Scala.</li> <li>Each implementation module provides a single facade class which consists of one or more static factory methods.</li> <li>Each static factory method returns an instance of a class or interface defined by the API without revealing the actual
implementation class.</li> <li>Except for their expected side effect (e.g. reading or writing data), implementations are virtually stateless, and
hence reusable and trivially thread-safe.</li></ul></div> <div><p>With this design, the canonical way of using Fun I/O is to import some static factory methods from one or more facade
classes.
It's perfectly fine to import all static factory methods using a wildcard like <code>*</code>.
However, for the purpose of showing the originating facade class, the examples on this page do not use wildcard imports
for static factory methods.</p></div> <h2 id="configuring-the-classpath"><a href="#configuring-the-classpath" aria-hidden="true" class="header-anchor">#</a> Configuring The Classpath</h2> <div><p>Once you've decided on the set of features required by your application you need to add the respective modules to the
class path - see <a href="/fun-io/module-structure-and-features.html">Module Structure And Features</a>.
A Java application typically has a dependency on <code>fun-io-bios</code>.
A Scala application typically has the same dependencies as a Java application plus an additional dependency on
<code>fun-io-scala-api</code> to improve the development experience in Scala.</p></div> <div><p>The examples on this page depend on <code>fun-io-bios</code>, <code>fun-io-jackson</code>, <code>fun-io-scala-api</code> and, transitively, <code>fun-io-api</code>.
If your application is a Java project build with Maven or a Scala project build with SBT, then you need to add the
following to its project configuration:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Maven</a></li><li><a>SBT</a></li></ul> <div><div class="language-pom extra-class"><pre class="language-text"><code>&lt;!-- pom.xml --&gt;
&lt;project ...&gt;
    ...
    &lt;dependencies&gt;
        ...
        &lt;dependency&gt;
            &lt;groupId&gt;global.namespace.fun-io&lt;/groupId&gt;
            &lt;artifactId&gt;fun-io-bios&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;global.namespace.fun-io&lt;/groupId&gt;
            &lt;artifactId&gt;fun-io-jackson&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></div></div><div><!----></div></div> <h2 id="encoding-objects"><a href="#encoding-objects" aria-hidden="true" class="header-anchor">#</a> Encoding Objects</h2> <div><p>The following code encodes the string <code>&quot;Hello world!&quot;</code> to JSON and writes it to standard output - including the quotes:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Encoder<span class="token punctuation">;</span>                 <span class="token comment">// from `fun-io-api`</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>stdout<span class="token punctuation">;</span>     <span class="token comment">// from `fun-io-bios`</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>Jackson<span class="token punctuation">.</span>json<span class="token punctuation">;</span> <span class="token comment">// from `fun-io-jackson`</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        Encoder encoder <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span><span class="token function">stdout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In the preceding code, the <code>BIOS</code> facade class provides the <code>stdout()</code> factory method which returns an instance of the
<code>Sink</code> interface.
The <code>Jackson</code> facade class provides the <code>json()</code> factory method which returns an instance of the <code>Codec</code> interface.
The codec and the sink are then combined into an instance of the <code>Encoder</code> interface, which is subsequently used to
encode the string <code>&quot;Hello world!&quot;</code>.</p></div> <div><p>There are many other <code>Codecs</code> and <code>Sinks</code> available - see <a href="/fun-io/module-structure-and-features.html">Module Structure And Features</a>.
Note that every <code>Store</code> is also a <code>Sink</code>, of which you will find plenty implementations provided by the facade classes.</p></div> <h2 id="applying-filters"><a href="#applying-filters" aria-hidden="true" class="header-anchor">#</a> Applying Filters</h2> <p>Here is a slightly more complex example:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Encoder<span class="token punctuation">;</span>
<span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Store<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>gzip<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>Jackson<span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        Store store <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Encoder encoder <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encoder</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>
        encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>The preceding code encodes the string <code>&quot;Hello world!&quot;</code> to JSON, compresses it using GZIP and writes the result to the
file <code>hello-world.gz</code>.
Note that <code>gzip()</code> and <code>buffer()</code> return instances of the <code>Filter</code> interface.
So the expression <code>json().map(gzip()).map(buffer())</code> actually <em>transforms</em> a JSON codec with a GZIP filter and a buffer
filter into another codec.
In Scala, this expression can be more concisely written as <code>json &lt;&lt; gzip &lt;&lt; buffer</code>.
Note that the <code>&lt;&lt;</code> operator is associative.</p></div> <div><p>Creating an encoder from a transformed codec and a store is nice, but what if you wanted to read back something from the
store?
In this case, it may be more appropriate to create a <code>ConnectedCodec</code> instead of an <code>Encoder</code>:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>ConnectedCodec<span class="token punctuation">;</span>
<span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Store<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>gzip<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>Jackson<span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        Store store <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;hello-world.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ConnectedCodec codec <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>
        codec<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String clone <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <h2 id="cloning-objects"><a href="#cloning-objects" aria-hidden="true" class="header-anchor">#</a> Cloning Objects</h2> <div><p>A <code>ConnectedCodec</code> is an <code>Encoder</code> and a <code>Decoder</code> in one, so it can be used to create a deep clone of the original
object.
To make this more useful, the <code>gzip()</code> and <code>buffer()</code> filters and the <code>file(...)</code> store can be removed and the encoded
data get buffered on the heap instead:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>ConnectedCodec<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>Jackson<span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        ConnectedCodec codec <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        codec<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String clone <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>Note that <code>memory</code> returns just another <code>Store</code> which is backed by an array of bytes.
This can be simplified:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>api<span class="token punctuation">.</span>ConnectedCodec<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>Jackson<span class="token punctuation">.</span>json<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        ConnectedCodec codec <span class="token operator">=</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String clone <span class="token operator">=</span> codec<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> clone<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <p>Because deep-cloning is a standard use case, there is a ready-made method in the BIOS facade for it:</p> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        String c <span class="token operator">=</span> BIOS<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span> c<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>In contrast to the previous examples, this method uses <code>BIOS.serialization()</code> instead of <code>Jackson.json()</code> as the
<code>Codec</code>, so the object to clone must implement <code>java.io.Serializable</code>.</p></div> <h2 id="copying-data"><a href="#copying-data" aria-hidden="true" class="header-anchor">#</a> Copying Data</h2> <div><p>The BIOS facade provides some utility methods for standard use cases based on the abstractions provided by the API.
One of these standard use cases is implemented by <code>BIOS.copy</code> in all its overloaded variants:
Copying all data from a given source of some form to a given sink of some form.
Other than the naive <em>while-read-do-write</em> loop, these copy methods employ a background thread for reading the data and
piping it to the current thread for writing the data.
The result is a significant performance boost due to much better utilization of I/O channels:</p></div> <div class="code-toggle"><ul class="code-language-switcher"><li><a class="active">Java</a></li><li><a>Scala</a></li></ul> <div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>copy<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> global<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>fun<span class="token punctuation">.</span>io<span class="token punctuation">.</span>bios<span class="token punctuation">.</span>BIOS<span class="token punctuation">.</span>gzip<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Scratch</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        <span class="token function">copy</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;file.gz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">gzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div><!----></div></div> <div><p>The preceding code uncompresses the data from the file <code>file.gz</code> and writes the uncompressed data to the file <code>file</code>.</p></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fun-io/module-structure-and-features.html" class="prev">
          Module Structure And Features
        </a></span> <span class="next"><a href="/fun-io/basic-archive-processing.html">
          Basic Archive Processing
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/fun-io/assets/js/app.04e0a5dd.js" defer></script><script src="/fun-io/assets/js/6.3f3e93d8.js" defer></script>
  </body>
</html>
